<!DOCTYPE html>
<html>
<head>
  <title>WoFAI Presale</title>
  <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@latest/lib/index.iife.js"></script>
  <style>
    body { font-family: Arial, text-align: center; padding: 50px; background: #f5f5f5; }
    img { width: 120px; border-radius: 20px; }
    button, input { margin-top: 20px; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <img src="https://crimson-certain-wolf-336.mypinata.cloud/ipfs/bafybeih3iwshjpvlxlsbg6mazrv77qu3inzpmixvznyaihqa2ut674nklu" />
  <h1>Buy WoFAI Tokens</h1>
  <p>1 SOL = 1,000,000 WoFAI</p>

  <button id="connectBtn">Connect Wallet</button><br>
  <input id="amount" type="number" placeholder="Amount in SOL" /><br>
  <button id="buyBtn">Buy WoFAI</button>

  <script>
    let provider = window.phantom?.solana;
    let publicKey;

    document.getElementById('connectBtn').onclick = async () => {
      const res = await provider.connect();
      publicKey = res.publicKey.toString();
      alert('Connected: ' + publicKey);
    };

    document.getElementById('buyBtn').onclick = async () => {
      const sol = parseFloat(document.getElementById('amount').value);
      if (!sol || !publicKey) return alert('Connect wallet and enter SOL amount');
      const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
      const tx = new solanaWeb3.Transaction().add(
        solanaWeb3.SystemProgram.transfer({
          fromPubkey: provider.publicKey,
          toPubkey: new solanaWeb3.PublicKey("GWkwfF8BbA591V4ZFTLDJJ9eRy5Mhp2Z9zNBNFvf6cgy"),
          lamports: sol * solanaWeb3.LAMPORTS_PER_SOL
        })
      );
      tx.feePayer = provider.publicKey;
      const blockhash = await connection.getRecentBlockhash();
      tx.recentBlockhash = blockhash.blockhash;

      const signed = await provider.signTransaction(tx);
      const sig = await connection.sendRawTransaction(signed.serialize());
      alert('Transaction sent: ' + sig);
    };
  </script>
</body>
</html>
